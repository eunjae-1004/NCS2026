-- ksa 테이블 완전 초기화 및 재설정 스크립트
-- 기존 데이터와 시퀀스를 모두 리셋합니다

-- ============================================
-- Step 1: 기존 데이터 확인
-- ============================================
SELECT 
    '현재 데이터 개수: ' || COUNT(*)::text as status
FROM ksa;

-- ============================================
-- Step 2: 모든 데이터 삭제 및 시퀀스 리셋
-- ============================================
-- ⚠️ 주의: 이 명령은 모든 데이터를 삭제합니다!
TRUNCATE TABLE ksa RESTART IDENTITY CASCADE;

-- ============================================
-- Step 3: 시퀀스 확인 (1부터 시작해야 함)
-- ============================================
SELECT 
    '시퀀스 현재 값: ' || currval('ksa_id_seq')::text as status
FROM ksa_id_seq;

-- 시퀀스를 0으로 리셋 (다음 값이 1이 되도록)
SELECT setval('ksa_id_seq', 0, false);

-- ============================================
-- Step 4: 확인
-- ============================================
SELECT 
    '테이블이 비어있습니다: ' || (COUNT(*) = 0)::text as status
FROM ksa;

SELECT 
    '다음 id 값: ' || nextval('ksa_id_seq')::text as next_id;

-- 시퀀스를 다시 0으로 리셋 (위에서 nextval로 증가했으므로)
SELECT setval('ksa_id_seq', 0, false);


